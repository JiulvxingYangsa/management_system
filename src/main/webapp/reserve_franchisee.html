<!DOCTYPE html>
<html charset="UTF-8">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>风格楼后台管理</title>
    <!-- Bootstrap Styles-->
    <link rel="stylesheet" type="text/css" href="static/css/bootstrap.css"/>
    <!-- FontAwesome Styles-->
    <link href="static/css/font-awesome.css" type="text/css" rel="stylesheet" />
    <!-- Morris Chart Styles-->
    <link href="static/js/morris/morris-0.4.3.min.css" type="text/css" rel="stylesheet" />
    <!-- Custom Styles-->
    <link href="static/css/custom-styles.css" type="text/css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <script src="static/js/jquery.min.js"></script>
    <!-- Bootstrap Js -->
    <script src="static/js/bootstrap.min.js"></script>
    <!-- Metis Menu Js -->
    <script src="static/js/jquery.metisMenu.js"></script>
    <!-- template -->
    <script src="static/js/template-web.js"></script>
</head>
<!-- 预加盟商人员显示模板 -->
<script type="text/html" id="reserve_agent">
                      {{each list itme}}
                       <tr>
                   		 <td>{{itme.cId}}</td>
                   		 <td class="cName">{{itme.cName}}</td>
                   		 <td>{{itme.cEmail}}</td>
                   		 <td>{{itme.cNumber}}</td>
                   		 <td>{{itme.cIdea}}</td>
                   		 <td>{{itme.cTime}}</td>
                   		 <td>
                   		 	  <button class="btn btn-success see_btn" data-see="{{itme.cId}}" id="btn_see">查看</button>
                   		 	  <button class="btn btn-danger delete_btn" data-del="{{itme.cId}}" id="btn_del">删除</button>
                   		 </td>
                       </tr>
                      {{/each}}
                       
</script>

<script type="text/html" id="page">
           <span id="paging"><strong>当前第   {{pageNum}} 页，总共  {{pages}} 页，一共有  {{total}} 条记录</strong></span><br/>
</script>

<script type="text/html" id="ul_li">
   <ul class="pagination">
	<li id="first_page"><a href="#">首页</a></li>
	<li><a href="#" id="previous_page">«</a></li>
												      
	 {{each navigatepageNums itme}}
	   <li class="lis" data-number="{{itme}}"><a>{{itme}}</a></li>
	 {{/each}}
												     
	<li><a href="#" id="next_page">»</a></li>
	<li id="last_page"><a href="#">末页</a></li>
   </ul>	           

</script>





<script type="text/html" id="tpl_box">
                      <div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">编号:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">{{cId}}</p>
							</div>
						</div>
					
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">姓名:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">{{cName}}</p>
							</div>
						</div>

						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">邮箱:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">{{cEmail}}</p>
							</div>
						</div>
						
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">联系方式:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">{{cNumber}}</p>
							</div>
						</div>

                            
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">提交时间:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">{{cTime}}</p>
							</div>
						</div>
                        
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">初步想法:</label>
							<div class="col-sm-10">
								<textarea rows="" cols="" >{{cIdea}}</textarea>
							    <span class="help-block"></span>
							</div>
						</div>

</script>




<script>
//分页总记录数
var totalRecord,currentPage;
   
window.onload=function(){
    	to_page(1);
    	
    }
    
    function to_page(pn){
    	$.ajax({
    		url:"http://120.78.199.50:8081/management_system/reserveAgentAll",
    		data:"pn="+pn,
    		type:"get",
    		success:function(result){
    			console.log(result);
    			totalRecord = result.extend.reserveAgent.total;
    			currentPage = result.extend.reserveAgent.pageNum;
    			//展示预加盟商的申请人数据
    			var agent = result.extend.reserveAgent.list;
    		    	result.list=agent;
    			    var table_tbody=document.getElementById('tbodys');
    		        var sHTML = template('reserve_agent',result)
    		        table_tbody.innerHTML=sHTML;
    		        
    		    var results = result.extend.reserveAgent;
                    
                 /* 分页条数据展示替换模板 */
                var pages=document.getElementById('paging');
                	var pHTML=template('page',results)
                    pages.innerHTML=pHTML;   
                
                var tables=document.getElementById('nav_ul');
                    var tHTMLs=template('ul_li',results)
                    tables.innerHTML=tHTMLs;
                	
                    build_page_nav(result);
    		    
                
           	}
    		
    	});
    	
    	
    }
   
    //分页条按钮
    function build_page_nav(result){
		   
    	
    	
		   var firstPageLi=$('#first_page');
		   var prePageLi =$('#previous_page');
		   
		   if(result.extend.reserveAgent.hasPreviousPage == false){
			   firstPageLi.addClass("disabled");
			   prePageLi.addClass("disabled");
			   
		   }else{
			 //为元素添加点击翻页的事件 
			    firstPageLi.click(function() {
					to_page(1);
				});
				prePageLi.click(function() {
					to_page(result.extend.reserveAgent.pageNum - 1);

				});
		   }
		   
		   var nextPageLi=$('#next_page');
		   var lastPageLi =$('#last_page');
		   
		   if(result.extend.reserveAgent.hasNextPage==false){
			   nextPageLi.addClass("disabled");
			   lastPageLi.addClass("disabled");
			   
		   }else{
			   
			 //为元素添加点击翻页的事件 
			 	nextPageLi.click(function() {
					to_page(result.extend.reserveAgent.pageNum + 1);
				});
			 	
				lastPageLi.click(function() {
					to_page(result.extend.reserveAgent.pages);
				});
				
			   
		   }
		   
	       	//ul中的页码提示			
		    var numLi = $(".lis");
		   /*  console.log(numLi); */
		    numLi.click(function() {
				to_page($(this).data('number'));
				/* console.log($(this).data('number')); */
			}); 

	
             //点击查看弹出模态框且查看数据
             var btnSee=$(".see_btn");
             btnSee.click(function(){
            	 getAgent($(this).data("see"));
            	 
            	// console.log($(this).data("see"));
            	 $("#empUpdateModal").modal({
         			backdrop : "static"
         	 	//getAgent($(this).data("see"));
         		});
             });
      	     
             
             
             //根据id获取agent的数据
             function getAgent(id){
            	   $.ajax({
            		   url:"http://120.78.199.50:8081/management_system/getAgent/"+id,
            		   type:"GET",
            		   success:function(result){
            			   //console.log(result);
            			   var agent = result.extend.agent;
            			   var moodl_box = document.getElementById('from_box');
            			   var mHtml = template('tpl_box',agent);
            			   moodl_box.innerHTML = mHtml;
            		   }
            		  
            		   
            		   
            	   }); 
             }
             
             var btn_del = $(".delete_btn");
             btn_del.click(function(){
            	 var cName=$(this).parents("tr").find(".cName").text();
            	// console.log(cName); 
            	 var cId=$(this).data("del");
            	//console.log(cId); 
            	//alert("确定删除【"+cName+"】吗？");
            	 if(confirm("确认删除[ "+cName+"]吗？")){
            		 $.ajax({
            		       url:"http://120.78.199.50:8081/management_system/deleteAgent/"+cId,
            		       type:"post",
            			   success:function(result){
            				   alert(result.msg);
          					 //回到本页
          					 to_page(currentPage);
            				   
            			   }
            			 
            		 });
                                		 
            	 }
        			

            	
             });             
             
             
             
             
             
             
             
             
      	 
	}
  
        	   
        	   
           
      	     		   
	  
    
    
    
    
    
    
    
    


</script>

<body>
     
      	<!-- Modal 员工信息修改模态框-->
	<div class="modal fade" id="empUpdateModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title"  align="center">预加盟商</h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="from_box">
					    <div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">编号:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">2</p>
							</div>
						</div>
					
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">姓名:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">杨洒</p>
							</div>
						</div>

						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">邮箱:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">yangsa@fenggelou.com</p>
							</div>
						</div>
						
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">联系方式:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">17352653641</p>
							</div>
						</div>

                            
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">提交时间:</label>
							<div class="col-sm-10">
							<p class="form-control-static" id="empName_update_static">2019-05-16 09:39:11.0</p>
							</div>
						</div>
                        
						<div class="form-group">
							<label for="empName_update_input" class="col-sm-2 control-label">初步想法:</label>
							<div class="col-sm-10">
								<textarea rows="" cols="" >我想加盟你们的店，请给于我们技术支持和帮助</textarea>
							    <span class="help-block"></span>
							</div>
						</div>
                           
                    

					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">退出</button>
					<!-- <button type="button" class="btn btn-primary" id = "emp_update_btn">更新</button> -->
				</div>
			</div>
		</div>
	</div> 
	
	<!-- 确认删除模态框 -->
<!-- Small modal -->
<!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Small modal</button>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="del_certain">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title"  align="center"><font style="color: red">删除需谨慎</font></h4>
				</div>
				<div class="modal-body">
					<form class="form-horizontal" id="from_box">
					    <div class="col-sm-10">
							
							<div class="col-sm-10">
							<p style="text-align: center;" class="form-control-static certain_delete" id="empName_update_static">您确定要删除吗</p>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">退出</button>
					<button type="button" class="btn btn-success" id = "emp_update_btn">确定</button> 
				</div>
    </div>
  </div>
</div> -->
	
	
	

    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">风格楼</a>
            </div>

            <ul class="nav navbar-top-links navbar-right">
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-messages">
                    	
                        <li>
                            <a href="#">
                               
                                <div>未读消息</div>
                                
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">
                       
                                
                                <div>已读消息</div>
                            </a>
                        </li>
                      
                   
                    </ul>
                    <!-- /.dropdown-messages -->
                </li>
                <!-- /.dropdown -->
              
                <!-- /.dropdown -->
               
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#"><i class="fa fa-user fa-fw"></i>管理员：</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i>设置</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="#"><i class="fa fa-sign-out fa-fw"></i>退出</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
        </nav>
        <!--/. NAV TOP  -->
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a href="index.html"><i class="fa fa-dashboard"></i>加盟商管理</a>
                    </li>
                    <li>
                        <a href="reserve_franchisee.html" class="active-menu"><i class="fa fa-desktop"></i>预加盟商</a>
                    </li>
					          <li>
                        <a href="menu_display.html"><i class="fa fa-bar-chart-o"></i>菜单展示</a>
                    </li>
                    <li>
                        <a href="today_price.html"><i class="fa fa-qrcode"></i>今日特价</a>
                    </li>
                    
                    <li>
                        <a href="cook_team.html"><i class="fa fa-table"></i>厨师团队</a>
                    </li>
                    <li>
                        <a href="message_synopsis.html"><i class="fa fa-edit"></i>消息与简介</a>
                    </li>


                   
                </ul>

            </div>

        </nav>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper" >
            <div id="page-inner">
			 <div class="row">
                    <div class="col-md-12">
                        <h1 class="page-header">
                            预加盟商<small>预加盟的入小伙伴</small>
                        </h1>
                    </div>
                </div> 
                 <!-- /. ROW  -->
				 
	   	  <div class="row">
                <table class="table table-hover">
                	
                   <thead>
                   	<tr>
	                   	 <th>加盟商id</th>
	                   	 <th>姓名</th>
	                   	 <th>邮箱</th>
	                   	 <th>联系方式</th>
	                   	 <th>留言</th>
	                   	 <th>提交时间</th>
	                   	 <th>操作</th>
                   	</tr>
                   </thead>
                   
                   <tbody id="tbodys">
                   	
                   	<tr>
                   		 <td>1</td>
                   		 <td>杨洒</td>
                   		 <td>yangsa@jiulvxing.com</td>
                   		 <td>17352653641</td>
                   		 <td>您好，我想应聘你们公司老板</td>
                   		 <td>2019/5/15</td>
                   		 <td>
                   		 	  <button class="btn btn-success">查看</button>
                   		 	  <button class="btn btn-danger">删除</button>
                   		 </td>
                   	</tr>
                   </tbody>
                </table>
               
               
               <!-- 分页条 -->
								<div style="margin-top: 10px; width: 100%;height: 100px;border: solid 0px red;text-align: center;" id="div_paging">
						            <span id="paging">当前 1页，总 563页，总 454353条记录</span><br/>
        	                              <div id="nav_ul">
									          <ul class="pagination">
									              <li id="first_page"><a href="#">首页</a></li>
												      <li><a href="#" id="previous_page">«</a></li>
												      
	         										  <li><a>1</a></li>
	         										  <li><a>2</a></li>
	         										  <li><a>3</a></li>
	         										  <li><a>4</a></li>
	         										  <li><a>5</a></li>
	         										  <li><a>6</a></li>
												     
												      <li><a href="#" id="next_page">»</a></li>
												  <li id="last_page"><a href="#">末页</a></li>
												</ul>	 
										   </div>
								</div>








 
       
            

          <div style="margin-top: 100px;text-align: center;">
	         	<footer><p>风格楼有限公司制作@版权归风格楼所有 <a href="http://120.78.199.50:8081/food/" target="_blank" title="风格楼">风格楼——Yangsa@fenggelou.com</a>
					 风格楼 <a href="http://120.78.199.50:8081/food/" title="风格楼" target="_blank">风格楼-www.fenggelou.com</a></p></footer>
			    </div> 
			     
          </div>
             <!-- /. PAGE INNER  -->
            </div>
         <!-- /. PAGE WRAPPER  -->
        </div>
     <!-- /. WRAPPER  -->
    <!-- JS Scripts-->
    <!-- jQuery Js -->
   
 
</body>
</html>
